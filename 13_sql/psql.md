# Инструкция по использованию консольного клиента для PostgreSQL

Чтобы удостовериться, что первоначальная настройка Docker контейнера действительно удалась, вы можете воспользоваться приведёнными ниже инструкциями.

## Docker Compose

В этом примере рассматривается следующая конфигурация `docker-compose.yml`:

```
version: '3.7'
services:
  postgresdb:
    image: postgres:latest
    ports:
      - 5432:5432
    environment:
      - POSTGRES_DB=app
      - POSTGRES_USER=app
      - POSTGRES_PASSWORD=pass
```

Необходимо запустить сервис через `docker-compose up`.

Удостоверяемся, что сервис запущены:
```
docker-compose ps

      Name                    Command              State                 Ports
--------------------------------------------------------------------------------------------
sql_postgresdb_1   docker-entrypoint.sh postgres   Up      0.0.0.0:5432->5432/tcp

```

Docker Compose позволяет подключаться к сервису и выполнять команды внутри него.

В образе PostgreSQL (и других СУБД) идут в комплекте CLI клиенты для СУБД (т.е. возможность из командной строки выполнять запросы в СУБД).

В PostgreSQL для этих целей существует утилита `psql`.

Для подключения используем [`exec`](https://docs.docker.com/compose/reference/exec/)

В Docker есть аналогичная команда, но поскольку мы плотно работаем с Docker Compose, то и рассматривать будем его.

### Postgres

```
docker-compose exec postgresdb psql -U app -d app -W 
```

где `-u app` имя пользователя, `-d app` база данных, `-W` указание на подключение с паролем.

Важно: пароль при наборе отображаться не будет, поэтому вводите "вслепую";

После чего вы увидите следующее:

```
psql (12.1 (Debian 12.1-1.pgdg100+1))
Type "help" for help.

app=#
```

Полное описание клиента приведено [на странице документации](https://www.postgresql.org/docs/current/app-psql.html).

Мы приведём лишь ключевые команды:
* `\d` - показывает существующие в базе таблицы
* `\d+ accounts;` - показывает информацию о колонках таблицы accounts (вам нужно использовать ваше название таблицы)
* `help` - справка
* `exit` - выход из клиента
* здесь же вы можете выполнять все команды SQL (вроде `CREATE`, `DROP`, `SELECT`, `INSERT`, `DELETE` и т.д.).

Соответственно, с помощью команд `\d` и `\d+ accounts;` (вместо accounts вам нужно подставить названия ваших таблиц) вы можете после старта контейнера убедиться, что таблицы действительно создаются.
